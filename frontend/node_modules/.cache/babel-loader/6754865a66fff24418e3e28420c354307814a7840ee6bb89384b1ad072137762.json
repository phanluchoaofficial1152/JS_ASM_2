{"ast":null,"code":"import _regeneratorRuntime from\"D:/JS_ASM_2/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"D:/JS_ASM_2/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"D:/JS_ASM_2/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from'react';import{Store}from'../Store';import{useContext}from'react';import{Helmet}from'react-helmet-async';import Row from'react-bootstrap/Row';import Col from'react-bootstrap/Col';import MessageBox from'../components/MessageBox';import{Link,useNavigate}from'react-router-dom';import ListGroup from'react-bootstrap/ListGroup';import Button from'react-bootstrap/Button';import Card from'react-bootstrap/Card';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function CartScreen(){var navigate=useNavigate();var _useContext=useContext(Store),state=_useContext.state,ctxDispatch=_useContext.dispatch;var cartItems=state.cart.cartItems;var updateCartHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(item,quantity){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/api/products/\".concat(item._id));case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;if(!(data.countInStock<quantity)){_context.next=7;break;}window.alert('Sorry, product is out of stock');return _context.abrupt(\"return\");case 7:ctxDispatch({type:'CART_ADD_ITEM',payload:_objectSpread(_objectSpread({},item),{},{quantity:quantity})});case 8:case\"end\":return _context.stop();}},_callee);}));return function updateCartHandler(_x,_x2){return _ref.apply(this,arguments);};}();var removeItemHandler=function removeItemHandler(item){ctxDispatch({type:'CART_REMOVE_ITEM',payload:item});};var checkoutHandler=function checkoutHandler(){navigate('/signin?redirect=/shipping');};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"Shopping Cart\"})}),/*#__PURE__*/_jsx(\"h1\",{children:\"Cart\"}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:8,children:cartItems.length===0?/*#__PURE__*/_jsxs(MessageBox,{children:[\"Cart is empty. \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Continue Shopping\"})]}):/*#__PURE__*/_jsx(ListGroup,{children:cartItems.map(function(item){return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{className:\"align-items-center\",children:[/*#__PURE__*/_jsxs(Col,{md:4,children:[/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.name,className:\"img-fluid rounded img-thumbnail\"}),' ',/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.slug),children:item.name})]}),/*#__PURE__*/_jsxs(Col,{md:3,children:[/*#__PURE__*/_jsx(Button,{variant:\"light\",onClick:function onClick(){return updateCartHandler(item,item.quantity-1);},disabled:item.quantity===1,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-minus-circle\"})}),' ',/*#__PURE__*/_jsx(\"span\",{children:item.quantity}),' ',/*#__PURE__*/_jsx(Button,{variant:\"light\",onClick:function onClick(){return updateCartHandler(item,item.quantity+1);},disabled:item.quantity===item.countInStock,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus-circle\"})})]}),/*#__PURE__*/_jsxs(Col,{md:3,children:[\"$\",item.price]}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Button,{variant:\"light\",onClick:function onClick(){return removeItemHandler(item,item.quantity+1);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})})]})},item._id);})})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsxs(ListGroup.Item,{children:[\"Subtotal (\",cartItems.reduce(function(a,c){return a+c.quantity;},0),' ',\"items) : $\",cartItems.reduce(function(a,c){return a+c.price*c.quantity;},0)]}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(\"div\",{className:\"d-grid\",children:/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"primary\",onClick:checkoutHandler,disabled:cartItems.length===0,children:\"Proceed to Checkout\"})})})]})})})})]})]});}","map":{"version":3,"names":["React","Store","useContext","Helmet","Row","Col","MessageBox","Link","useNavigate","ListGroup","Button","Card","axios","jsx","_jsx","jsxs","_jsxs","CartScreen","navigate","_useContext","state","ctxDispatch","dispatch","cartItems","cart","updateCartHandler","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","item","quantity","_yield$axios$get","data","wrap","_callee$","_context","prev","next","get","concat","_id","sent","countInStock","window","alert","abrupt","type","payload","_objectSpread","stop","_x","_x2","apply","arguments","removeItemHandler","checkoutHandler","children","md","length","to","map","Item","className","src","image","alt","name","slug","variant","onClick","disabled","price","Body","reduce","a","c"],"sources":["D:/JS_ASM_2/frontend/src/screens/CartScreen.js"],"sourcesContent":["import React from 'react';\nimport { Store } from '../Store';\nimport { useContext } from 'react';\nimport { Helmet } from 'react-helmet-async';\nimport  Row  from 'react-bootstrap/Row';\nimport  Col  from 'react-bootstrap/Col';\nimport MessageBox from '../components/MessageBox';\nimport { Link, useNavigate } from 'react-router-dom';\nimport ListGroup from 'react-bootstrap/ListGroup';\nimport Button from 'react-bootstrap/Button';\nimport Card from 'react-bootstrap/Card';\nimport axios from 'axios';\n\nexport default function CartScreen () {\n    const navigate = useNavigate();\n    const {state , dispatch: ctxDispatch} = useContext(Store);\n    const {\n        cart: {cartItems},\n    } = state;\n\n    const updateCartHandler = async (item , quantity) => {\n        const {data} = await axios.get(`/api/products/${item._id}`);\n\n        if (data.countInStock < quantity) {\n            window.alert('Sorry, product is out of stock');\n            return;\n        }\n\n        ctxDispatch({\n            type: 'CART_ADD_ITEM' ,\n            payload: {...item , quantity},\n        });\n    };\n\n    const removeItemHandler = (item) => {\n        ctxDispatch({type: 'CART_REMOVE_ITEM' , payload: item});\n    };\n\n    const checkoutHandler = () => {\n        navigate('/signin?redirect=/shipping');\n    };\n\n    return (\n        <div>\n            <Helmet>\n                <title>Shopping Cart</title>\n            </Helmet>\n            <h1>Cart</h1>\n            <Row>\n                <Col md={8}>\n                    {\n                        cartItems.length === 0 ? (\n                            <MessageBox>\n                                Cart is empty. <Link to=\"/\">Continue Shopping</Link>\n                            </MessageBox>\n                        ) :\n                        (\n                            <ListGroup>\n                                {\n                                    cartItems.map((item) => (\n                                        <ListGroup.Item key={item._id}>\n                                            <Row className=\"align-items-center\">\n                                                <Col md={4}>\n                                                    <img\n                                                        src={item.image}\n                                                        alt={item.name}\n                                                        className='img-fluid rounded img-thumbnail'\n                                                    ></img>{' '}\n                                                    <Link to={`/product/${item.slug}`}>{item.name}</Link>\n                                                </Col>\n                                                <Col md={3}>\n                                                    <Button\n                                                        variant=\"light\"\n                                                        onClick={() =>\n                                                            updateCartHandler(item , item.quantity - 1)\n                                                        }\n                                                        disabled={item.quantity === 1}\n                                                    >\n                                                        <i className='fas fa-minus-circle'></i>\n                                                    </Button>{' '}\n                                                    <span>{item.quantity}</span>{' '}\n                                                    <Button\n                                                        variant=\"light\"\n                                                        onClick={() =>\n                                                            updateCartHandler(item , item.quantity + 1)\n                                                        }\n                                                        disabled={item.quantity === item.countInStock}\n                                                    >\n                                                        <i className='fas fa-plus-circle'></i>\n                                                    </Button>\n                                                </Col>\n                                                <Col md={3}>${item.price}</Col>\n                                                <Col md={2}>\n                                                    <Button\n                                                        variant='light'\n                                                        onClick={() =>\n                                                            removeItemHandler(item , item.quantity + 1)\n                                                        }\n                                                    >\n                                                        <i className='fas fa-trash'></i>\n                                                    </Button>\n                                                </Col>\n                                            </Row>\n                                        </ListGroup.Item>\n                                    ))\n                                }\n                            </ListGroup>\n                        )\n                    }\n                </Col>\n                <Col md={4}>\n                    <Card>\n                        <Card.Body>\n                            <ListGroup variant='flush'>\n                                <ListGroup.Item>\n                                    Subtotal (\n                                    {\n                                        cartItems.reduce((a , c) => a + c.quantity , 0)}{' '}\n                                        items)\n                                        : $\n                                    {\n                                        cartItems.reduce((a , c) => a + c.price * c.quantity , 0)\n                                    }\n                                </ListGroup.Item>\n                                <ListGroup.Item>\n                                    <div className='d-grid'>\n                                        <Button\n                                            type='button'\n                                            variant='primary'\n                                            onClick={checkoutHandler}\n                                            disabled={cartItems.length === 0}\n                                        >\n                                            Proceed to Checkout\n                                        </Button>\n                                    </div>\n                                </ListGroup.Item>\n                            </ListGroup>\n\n                        </Card.Body>\n                    </Card>\n                </Col>\n            </Row>\n        </div>\n    );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}